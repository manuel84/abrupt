require 'spec_helper'
describe Abrupt::Converter, :vcr do
  it 'converts to correct owl' do
    crawled_hash = {:website => {:domain => "http://www.rikscha-mainz.de", :url => [{:name => "http://www.rikscha-mainz.de/", :state => {:readability => {"sentences" => 49, "words" => 234, "syllables" => 410, "language" => "de", "bigwords" => 46, "readability" => 4.9695635443921, "numberOfLinks" => 12}, :input => {"text" => [], "password" => [], "number" => [], "email" => [], "checkbox" => [], "select" => [], "option" => [], "hidden" => [], "textarea" => [], "range" => [], "search" => [], "tel" => [], "url" => [], "week" => [], "color" => [], "date" => [], "datetime" => [], "datetime_local" => [], "month" => [], "file" => [], "image" => [], "radio" => [], "reset" => [], "submit" => []}, :subject => nil, :complexity => {"adblock" => [], "vicram" => {"complexity" => 0.6395}, "vizweb" => {"numberOfLeaves" => 1, "textArea" => 0, "visualComplexity" => 0.79690559961371, "numberOfTextGroups" => 0, "hue" => 0.78842163085938, "numberOfImageAreas" => 0, "horizontalSymmetry" => 1, "horizontalBalance" => nil, "colorfulness" => 13.723379102371, "nontextArea" => 1.3333333333333}, "differenceMatrix" => {"matrix" => [0, 37.735924528226, 69, 18, 41.569219381653, 24.657656011876, 12.649110640674, 37.735924528226, 0, 34.885527085025, 21.260291625469, 25.612496949731, 26.832815729997, 33.226495451672, 69, 34.885527085025, 0, 51, 56.364882684168, 60.934390946328, 66.098411478643, 18, 21.260291625469, 51, 0, 34.467375879228, 22.360679774998, 18.439088914586, 41.569219381653, 25.612496949731, 56.364882684168, 34.467375879228, 0, 20.396078054371, 33.466401061363, 24.657656011876, 26.832815729997, 60.934390946328, 22.360679774998, 20.396078054371, 0, 21.908902300207, 12.649110640674, 33.226495451672, 66.098411478643, 18.439088914586, 33.466401061363, 21.908902300207, 0], "palette" => [4, 4, 4, 12, 12, 40, 4, 4, 73, 4, 4, 22, 28, 28, 28, 12, 24, 16, 16, 4, 8]}, "contrast" => {"_1" => {"A_tag_With_Low_Contrast" => 0, "TextNodes_With_Low_Contrast" => 0, "paragrahps_with_too_long_lines" => 0}}, "ratios" => {"pageSize" => {"pageWidth_in_pixel" => 400, "pageHeight_in_pixel" => 724, "pageSize_in_pixel_squared" => 289600}, "img_Tag" => {"img_Area_in_pixel_squared" => 2730, "img_document_tag_ratio" => 106.08058608059, "img_document_tag_percentage" => 0.94267955801105}}}, :link => {"a" => [{"href" => "http://www.rikscha-mainz.de"}, {"href" => "http://www.rikscha-mainz.de/Angebot/", "plaintext" => "angebot"}, {"href" => "http://www.rikscha-mainz.de/Fuhrpark/", "plaintext" => "fuhrpark"}, {"href" => "http://www.rikscha-mainz.de/Kontakt/", "plaintext" => "kontakt"}, {"href" => "http://www.rikscha-mainz.de/Galerie/", "plaintext" => "galerie"}, {"href" => "http://www.rikscha-mainz.de/ePostkarten/", "plaintext" => "epostkarten"}, {"href" => "http://www.rikscha-mainz.de/Stellenangebote/", "plaintext" => "stellenangebote"}, {"href" => "http://www.rikscha-mainz.de/Partner/", "plaintext" => "partner"}, {"href" => "http://www.rikscha-mainz.de/Impressum/", "plaintext" => "impressum"}, {"href" => "http://m.rikscha-mainz.de", "plaintext" => "<span&nbsp;style=\"fo"}, {"href" => "http://www.rikscha-mainz.de/Kontakt/", "plaintext" => "sprechen sie uns an"}, {"href" => "http://www.rikscha-mainz.de/Angebot/", "plaintext" => "angebot"}], "form" => []}, :picture => {"duration" => 3.9, "images" => [{"type" => "normal", "duration" => 3.9, "mimetype" => "image/JPEG", "geometry" => "285x379", "filename" => "random.jpg"}, {"type" => "article", "duration" => 0, "mimetype" => "image/PNG", "geometry" => "135x111", "filename" => "RikschaLogo.png"}, {"type" => "background", "duration" => 0, "mimetype" => "image/GIF", "geometry" => "1x1", "filename" => "piwik.php?idsite=5"}]}}}]}}
    result = RDF::Graph.load('fixtures/rikscha-mainz.owl')
    expect(result).to eq(crawled_hash)
  end

end
